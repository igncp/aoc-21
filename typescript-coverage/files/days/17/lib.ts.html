
  <!DOCTYPE html>
  <html>
    <head>
      <title>lib.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">days/17/lib.ts</td><td class="">100.00%</td><td class="">99%</td><td class="">215</td><td class="">215</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">type Vector = {
  x: number
  y: number
}
type Point = Vector
type Velocity = Vector

type Bounds = {
  maxX: number
  maxY: number
  minX: number
  minY: number
}

const calculateTrajectory = (opts: {
  bounds: Bounds
  velocity: Velocity
}): Point[] =&gt; {
  const points: Point[] = []
  const velocity = { ...opts.velocity }

  while (true) {
    const lastPoint = points[points.length - 1] || { x: 0, y: 0 }
    const nextPoint = {
      x: lastPoint.x + velocity.x,
      y: lastPoint.y + velocity.y,
    }

    velocity.x = Math.max(velocity.x - 1, 0)
    velocity.y -= 1

    points.push(nextPoint)

    if (
      nextPoint.x &gt; opts.bounds.maxX ||
      nextPoint.y &lt; opts.bounds.minY ||
      (velocity.x === 0 &amp;&amp; nextPoint.x &lt; opts.bounds.minX)
    ) {
      break
    }
  }

  return points
}

const extractAreaInfo = (area: string) =&gt; {
  const [, coords] = area.split(&quot;target area: &quot;)
  const [x, y] = coords.split(&quot;, &quot;).map((s) =&gt; s.replace(/[xy]=/g, &quot;&quot;))
  const [[minX, maxX], [minY, maxY]] = [x, y].map((coord) =&gt;
    coord.split(&quot;..&quot;).map(Number)
  )

  return {
    bounds: {
      maxX,
      maxY,
      minX,
      minY,
    },
  }
}

const isInsideBounds = ({
  bounds,
  point,
}: {
  bounds: Bounds
  point: Point
}) =&gt; {
  return (
    point.x &gt;= bounds.minX &amp;&amp;
    point.x &lt;= bounds.maxX &amp;&amp;
    point.y &gt;= bounds.minY &amp;&amp;
    point.y &lt;= bounds.maxY
  )
}

const loopValidVelocities = (opts: {
  area: string
  fn: (params: { points: Point[]; velocity: Velocity }) =&gt; void
}) =&gt; {
  const { bounds } = extractAreaInfo(opts.area)
  const highestPoint = { x: 0, y: 0 }

  for (let { minY: y } = bounds; y &lt; Math.abs(bounds.minY); y += 1) {
    for (let x = 0; x &lt;= bounds.maxX; x += 1) {
      const velocity = { x, y }
      const points = calculateTrajectory({ bounds, velocity })
      const hasPointInBounds = points.find((point) =&gt;
        isInsideBounds({
          bounds,
          point,
        })
      )

      if (hasPointInBounds) {
        opts.fn({
          points,
          velocity,
        })
      }
    }
  }

  return highestPoint
}

const findHighestPoint = (area: string) =&gt; {
  const highestPoint = { x: 0, y: 0 }

  loopValidVelocities({
    area,
    fn: ({ points }) =&gt; {
      points.forEach((point) =&gt; {
        if (point.y &gt; highestPoint.y) {
          highestPoint.x = point.x
          highestPoint.y = point.y
        }
      })
    },
  })

  return highestPoint
}

const getAllValidVelocitiesNum = (area: string) =&gt; {
  let velocities = 0

  loopValidVelocities({
    area,
    fn: () =&gt; {
      velocities += 1
    },
  })

  return velocities
}

const _test =
  process.env.NODE_ENV === &quot;test&quot;
    ? {
        calculateTrajectory,
        extractAreaInfo,
      }
    : /* istanbul ignore next */
      null

export { findHighestPoint, _test, getAllValidVelocitiesNum }
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 20 Jul 2022 22:37:52 GMT</p>
    </body>
  </html>
  